<app-layout>
  <div class="relative h-96 overflow-hidden mt-16">
    <div class="flex transition-transform duration-300 h-full" [style.transform]="'translateX(-' + currentSlide * 100 + '%)'">
      <div *ngFor="let banner of banners; let i = index" class="carousel-slide min-w-full relative">
        <img [src]="banner.target_url" [alt]="banner.title" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-gray-900/30 bg-opacity-40 flex items-center">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-white max-w-lg">
              <h1 class="text-4xl font-bold mb-4">{{ banner.title }}</h1>
              <p class="text-xl mb-8">Discover the latest blockbusters and exclusive premieres</p>
              <button class="bg-[#7c3aed] hover:bg-[#6d28d9] text-white px-8 py-3 rounded-lg font-medium transition-colors" 
                       (click)="navigateToMovies()">Book Now</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button (click)="prevSlide()" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-opacity">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>
    <button (click)="nextSlide()" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-opacity">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
    
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
      <button *ngFor="let banner of banners; let i = index" 
              (click)="goToSlide(i)"
              class="carousel-indicator w-3 h-3 rounded-full"
              [class.bg-opacity-100]="i === currentSlide"
              [class.bg-opacity-50]="i !== currentSlide"></button>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 py-8">
    <section class="mb-12">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Recommended Movies</h2>
        <a routerLink="/movies" class="text-[#7c3aed] hover:text-[#5b21b6] font-medium">View All</a>
      </div>
      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
        <div *ngFor="let movie of recommendedMovies" 
             class="movie-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all cursor-pointer" 
             (click)="navigateToMovie(movie._id)">
          <img [src]="movie.poster" [alt]="movie.title" class="w-full h-80 object-cover">
          <div class="p-4">
            <h3 class="font-semibold text-lg text-gray-900 truncate">{{ movie.title }}</h3>
            <p class="text-sm text-gray-600 mt-1">{{ movie.genre.join(' • ') }}</p>
            <div class="flex items-center mt-3">
              <span class="text-xs bg-gray-100 px-2 py-1 rounded">{{ movie.rating }}</span>
              <span class="text-xs text-gray-500 ml-2">{{ movie.duration }}</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-12">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Recent Releases</h2>
        <a routerLink="/movies" class="text-[#7c3aed] hover:text-[#5b21b6] font-medium">View All</a>
      </div>
      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
        <div *ngFor="let movie of recentMovies" 
             class="movie-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all cursor-pointer" 
             (click)="navigateToMovie(movie._id)">
          <img [src]="movie.poster" [alt]="movie.title" class="w-full h-80 object-cover">
          <div class="p-4">
            <h3 class="font-semibold text-lg text-gray-900 truncate">{{ movie.title }}</h3>
            <p class="text-sm text-gray-600 mt-1">{{ movie.genre.join(' • ') }}</p>
            <div class="flex items-center mt-3">
              <span class="text-xs bg-gray-100 px-2 py-1 rounded">{{ movie.rating }}</span>
              <span class="text-xs text-gray-500 ml-2">{{ movie.duration }}</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-12">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-gray-800">3D Movies</h2>
        <a routerLink="/movies" class="text-[#7c3aed] hover:text-[#5b21b6] font-medium">View All</a>
      </div>
      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
        <div *ngFor="let movie of threeDMovies" 
             class="movie-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all cursor-pointer" 
             (click)="navigateToMovie(movie._id)">
          <img [src]="movie.poster" [alt]="movie.title" class="w-full h-80 object-cover">
          <div class="p-4">
            <h3 class="font-semibold text-lg text-gray-900 truncate">{{ movie.title }}</h3>
            <p class="text-sm text-gray-600 mt-1">{{ movie.genre.join(' • ') }}</p>
            <div class="flex items-center mt-3">
              <span class="text-xs bg-gray-100 px-2 py-1 rounded">{{ movie.rating }}</span>
              <span class="text-xs text-gray-500 ml-2">{{ movie.duration }}</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</app-layout>